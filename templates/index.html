<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Movie Grid - Movies Recommendations</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #e50914;
            --primary-dark: #b20710;
            --secondary: #f5c518;
            --dark: #141414;
            --darker: #0a0a0a;
            --light: #ffffff;
            --gray: #808080;
            --card-bg: #1a1a1a;
            --gradient: linear-gradient(135deg, #e50914 0%, #b20710 100%);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: var(--darker);
            color: var(--light);
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--dark);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--primary);
            border-radius: 4px;
        }

        /* Navbar */
        .navbar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            background: linear-gradient(to bottom, rgba(0,0,0,0.9) 0%, transparent 100%);
            padding: 15px 50px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: background 0.3s ease;
        }

        .navbar.scrolled {
            background: rgba(0, 0, 0, 0.95);
            backdrop-filter: blur(10px);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            text-decoration: none;
        }

        .logo-icon {
            font-size: 2.5rem;
            color: var(--primary);
        }

        .logo-text {
            font-size: 1.8rem;
            font-weight: 800;
            background: var(--gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .nav-links {
            display: flex;
            gap: 30px;
            list-style: none;
        }

        .nav-links a {
            color: var(--light);
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s;
            position: relative;
        }

        .nav-links a:hover {
            color: var(--primary);
        }

        .nav-links a::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 0;
            height: 2px;
            background: var(--primary);
            transition: width 0.3s;
        }

        .nav-links a:hover::after {
            width: 100%;
        }

        /* Search Bar */
        .search-container {
            position: relative;
        }

        .search-bar {
            display: flex;
            align-items: center;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 25px;
            padding: 10px 20px;
            border: 1px solid transparent;
            transition: all 0.3s;
        }

        .search-bar:focus-within {
            border-color: var(--primary);
            background: rgba(255, 255, 255, 0.15);
        }

        .search-bar input {
            background: transparent;
            border: none;
            outline: none;
            color: var(--light);
            width: 200px;
            font-size: 0.9rem;
        }

        .search-bar input::placeholder {
            color: var(--gray);
        }

        .search-bar i {
            color: var(--gray);
            margin-right: 10px;
        }

        .search-results {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: var(--card-bg);
            border-radius: 10px;
            margin-top: 10px;
            max-height: 400px;
            overflow-y: auto;
            display: none;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
        }

        .search-results.active {
            display: block;
        }

        .search-result-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            cursor: pointer;
            transition: background 0.3s;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .search-result-item:hover {
            background: rgba(229, 9, 20, 0.2);
        }

        .search-result-item img {
            width: 50px;
            height: 75px;
            object-fit: cover;
            border-radius: 5px;
        }

        .search-result-info h4 {
            font-size: 0.95rem;
            margin-bottom: 5px;
        }

        .search-result-info span {
            font-size: 0.8rem;
            color: var(--gray);
        }

        /* Hero Section */
        .hero {
            position: relative;
            height: 90vh;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        .hero-bg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-size: cover;
            background-position: center;
            filter: brightness(0.3);
            transition: all 0.5s ease;
        }

        .hero-gradient {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 300px;
            background: linear-gradient(to top, var(--darker) 0%, transparent 100%);
        }

        .hero-inner {
            position: relative;
            z-index: 10;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 50px;
            width: 100%;
            max-width: 1300px;
            padding: 0 50px;
        }

        .hero-content {
            flex: 1;
            text-align: center;
            max-width: 700px;
        }

        /* Developer Box - Red Box on Right */
        .developer-box {
            flex-shrink: 0;
            background: rgba(229, 9, 20, 0.12);
            border: 3px solid var(--primary);
            border-radius: 20px;
            padding: 24px;
            text-align: center;
            box-shadow: 0 8px 32px rgba(229, 9, 20, 0.25);
        }

        .developer-photo {
            width: 200px;
            height: 200px;
            border-radius: 50%;
            object-fit: cover;
            border: 3px solid var(--primary);
            display: block;
        }

        .developer-name {
            margin-top: 16px;
            font-weight: 700;
            font-size: 1.15rem;
            letter-spacing: 2px;
            color: var(--light);
        }

        .developer-label {
            margin-top: 4px;
            font-size: 0.85rem;
            color: var(--gray);
        }

        .hero-title {
            font-size: 4rem;
            font-weight: 800;
            margin-bottom: 20px;
            text-shadow: 2px 2px 10px rgba(0, 0, 0, 0.5);
        }

        .hero-title span {
            background: var(--gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .hero-subtitle {
            font-size: 1.3rem;
            color: var(--gray);
            margin-bottom: 40px;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .hero-stats {
            display: flex;
            justify-content: center;
            gap: 60px;
            margin-bottom: 40px;
        }

        .stat {
            text-align: center;
        }

        .stat-number {
            font-size: 3rem;
            font-weight: 700;
            color: var(--primary);
        }

        .stat-label {
            color: var(--gray);
            font-size: 0.9rem;
        }

        .hero-btn {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: var(--gradient);
            color: var(--light);
            padding: 15px 40px;
            border-radius: 50px;
            text-decoration: none;
            font-weight: 600;
            font-size: 1.1rem;
            transition: all 0.3s;
            border: none;
            cursor: pointer;
        }

        .hero-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 30px rgba(229, 9, 20, 0.4);
        }

        /* Section Styles */
        .section {
            padding: 60px 50px;
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }

        .section-title {
            font-size: 1.8rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .section-title i {
            color: var(--primary);
        }

        .view-all {
            color: var(--primary);
            text-decoration: none;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 5px;
            transition: gap 0.3s;
        }

        .view-all:hover {
            gap: 10px;
        }

        /* Genre Tags */
        .genres-container {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            margin-bottom: 40px;
        }

        .genre-tag {
            padding: 12px 25px;
            border-radius: 25px;
            background: var(--card-bg);
            color: var(--light);
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 500;
            border: 2px solid transparent;
        }

        .genre-tag:hover, .genre-tag.active {
            transform: translateY(-3px);
            border-color: var(--primary);
            box-shadow: 0 5px 20px rgba(229, 9, 20, 0.3);
        }

        .genre-tag.active {
            background: var(--primary);
        }

        /* Movie Grid */
        .movies-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 30px;
        }

        .movie-card {
            position: relative;
            border-radius: 15px;
            overflow: hidden;
            background: var(--card-bg);
            transition: all 0.4s ease;
            cursor: pointer;
        }

        .movie-card:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5);
        }

        .movie-poster {
            position: relative;
            aspect-ratio: 2/3;
            overflow: hidden;
        }

        .movie-poster img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.4s;
            background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
        }
        
        .movie-poster img.loading {
            opacity: 0.5;
        }

        .movie-card:hover .movie-poster img {
            transform: scale(1.1);
        }

        .movie-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(to top, rgba(0,0,0,0.9) 0%, transparent 50%);
            opacity: 0;
            transition: opacity 0.3s;
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
            padding: 20px;
        }

        .movie-card:hover .movie-overlay {
            opacity: 1;
        }

        .movie-rating {
            position: absolute;
            top: 15px;
            right: 15px;
            background: var(--secondary);
            color: var(--dark);
            padding: 5px 12px;
            border-radius: 20px;
            font-weight: 700;
            font-size: 0.85rem;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .movie-play {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            width: 60px;
            height: 60px;
            background: var(--primary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.3s;
        }

        .movie-card:hover .movie-play {
            transform: translate(-50%, -50%) scale(1);
        }

        .movie-play i {
            font-size: 1.5rem;
            margin-left: 5px;
        }

        .movie-info {
            padding: 15px;
        }

        .movie-title {
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 5px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .movie-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: var(--gray);
            font-size: 0.85rem;
        }

        .movie-genres {
            display: flex;
            gap: 5px;
            flex-wrap: wrap;
            margin-top: 8px;
        }

        .movie-genre-tag {
            font-size: 0.7rem;
            padding: 3px 8px;
            border-radius: 10px;
            background: rgba(229, 9, 20, 0.2);
            color: var(--primary);
        }

        /* Movie Carousel */
        .movie-carousel {
            display: flex;
            gap: 20px;
            overflow-x: auto;
            padding: 20px 0;
            scroll-behavior: smooth;
            scrollbar-width: none;
        }

        .movie-carousel::-webkit-scrollbar {
            display: none;
        }

        .movie-carousel .movie-card {
            flex: 0 0 200px;
        }

        /* Modal */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.9);
            z-index: 2000;
            display: none;
            justify-content: center;
            align-items: center;
            padding: 50px;
            overflow-y: auto;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: var(--card-bg);
            border-radius: 20px;
            max-width: 1000px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            animation: modalSlide 0.3s ease;
        }

        @keyframes modalSlide {
            from {
                opacity: 0;
                transform: translateY(-50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .modal-close {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 40px;
            height: 40px;
            background: rgba(255, 255, 255, 0.1);
            border: none;
            border-radius: 50%;
            color: var(--light);
            font-size: 1.2rem;
            cursor: pointer;
            z-index: 10;
            transition: all 0.3s;
        }

        .modal-close:hover {
            background: var(--primary);
        }

        .modal-hero {
            position: relative;
            height: 400px;
        }

        .modal-hero img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .modal-hero-gradient {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 200px;
            background: linear-gradient(to top, var(--card-bg) 0%, transparent 100%);
        }

        .modal-poster {
            position: absolute;
            bottom: -50px;
            left: 40px;
            width: 180px;
            height: 270px;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }

        .modal-poster img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .modal-body {
            padding: 80px 40px 40px;
        }

        .modal-title {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 10px;
        }

        .modal-meta {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .modal-meta-item {
            display: flex;
            align-items: center;
            gap: 8px;
            color: var(--gray);
        }

        .modal-meta-item i {
            color: var(--primary);
        }

        .modal-rating {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background: var(--secondary);
            color: var(--dark);
            padding: 8px 15px;
            border-radius: 25px;
            font-weight: 700;
        }

        .modal-genres {
            display: flex;
            gap: 10px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .modal-genre {
            padding: 8px 20px;
            border-radius: 20px;
            background: rgba(229, 9, 20, 0.2);
            color: var(--primary);
            font-weight: 500;
        }

        .modal-description {
            color: var(--gray);
            line-height: 1.8;
            margin-bottom: 30px;
            font-size: 1.05rem;
        }

        .modal-cast {
            margin-bottom: 30px;
        }

        .modal-cast h3 {
            margin-bottom: 15px;
            font-size: 1.2rem;
        }

        .cast-list {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .cast-item {
            background: rgba(255, 255, 255, 0.05);
            padding: 10px 20px;
            border-radius: 25px;
            font-size: 0.9rem;
        }

        /* Recommendations Section */
        .recommendations-section {
            margin-top: 40px;
            padding-top: 30px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .recommendations-section h3 {
            margin-bottom: 20px;
            font-size: 1.3rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .recommendations-section h3 i {
            color: var(--primary);
        }

        .recommendations-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 20px;
        }

        .rec-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            overflow: hidden;
            cursor: pointer;
            transition: all 0.3s;
        }

        .rec-card:hover {
            transform: scale(1.05);
            background: rgba(229, 9, 20, 0.2);
        }

        .rec-card img {
            width: 100%;
            aspect-ratio: 2/3;
            object-fit: cover;
        }

        .rec-card-info {
            padding: 10px;
        }

        .rec-card-title {
            font-size: 0.85rem;
            font-weight: 500;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .rec-card-score {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-top: 5px;
            font-size: 0.75rem;
            color: var(--gray);
        }

        .rec-card-score .match {
            color: #4caf50;
            font-weight: 600;
        }

        /* Footer */
        .footer {
            background: var(--dark);
            padding: 60px 50px 30px;
            margin-top: 60px;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 40px;
            margin-bottom: 40px;
        }

        .footer-section h4 {
            margin-bottom: 20px;
            color: var(--primary);
        }

        .footer-section ul {
            list-style: none;
        }

        .footer-section ul li {
            margin-bottom: 10px;
        }

        .footer-section ul li a {
            color: var(--gray);
            text-decoration: none;
            transition: color 0.3s;
        }

        .footer-section ul li a:hover {
            color: var(--light);
        }

        .footer-bottom {
            text-align: center;
            padding-top: 30px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: var(--gray);
        }

        /* Loading Spinner */
        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 50px;
        }

        .spinner {
            width: 50px;
            height: 50px;
            border: 4px solid rgba(229, 9, 20, 0.2);
            border-top-color: var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Responsive */
        @media (max-width: 768px) {
            .navbar {
                padding: 15px 20px;
            }

            .nav-links {
                display: none;
            }

            .hero-inner {
                flex-direction: column;
                padding: 0 20px;
            }

            .developer-box {
                order: -1;
                margin-bottom: 10px;
            }

            .developer-photo {
                width: 140px;
                height: 140px;
            }

            .hero-title {
                font-size: 2.5rem;
            }

            .hero-stats {
                gap: 30px;
            }

            .stat-number {
                font-size: 2rem;
            }

            .section {
                padding: 40px 20px;
            }

            .section-title {
                font-size: 1.4rem;
            }

            .movies-grid {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
                gap: 15px;
            }

            .modal {
                padding: 20px;
            }

            .modal-poster {
                width: 120px;
                height: 180px;
                left: 20px;
            }

            .modal-body {
                padding: 60px 20px 20px;
            }

            .modal-title {
                font-size: 1.8rem;
            }
        }
    </style>
</head>
<body>
    <!-- Navbar -->
    <nav class="navbar" id="navbar">
        <a href="#" class="logo">
            <i class="fas fa-film logo-icon"></i>
            <span class="logo-text">Movie Grid</span>
        </a>
        <ul class="nav-links">
            <li><a href="#" onclick="showSection('home')">Home</a></li>
            <li><a href="#" onclick="showSection('genres')">Genres</a></li>
            <li><a href="#" onclick="showSection('top-rated')">Top Rated</a></li>
            <li><a href="#" onclick="showSection('latest')">Latest</a></li>
        </ul>
        <div class="search-container">
            <div class="search-bar">
                <i class="fas fa-search"></i>
                <input type="text" id="searchInput" placeholder="Search movies, actors..." oninput="handleSearch(this.value)">
            </div>
            <div class="search-results" id="searchResults"></div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero" id="heroSection">
        <div class="hero-bg" id="heroBg"></div>
        <div class="hero-gradient"></div>
        <div class="hero-inner">
            <div class="hero-content">
                <h1 class="hero-title">Discover <span>Bollywood</span> Magic</h1>
                <p class="hero-subtitle">Your ultimate destination for Bollywood movie recommendations powered by AI</p>
                <div class="hero-stats" id="heroStats">
                    <div class="stat">
                        <div class="stat-number" id="totalMovies">100</div>
                        <div class="stat-label">Movies</div>
                    </div>
                    <div class="stat">
                        <div class="stat-number" id="totalGenres">20</div>
                        <div class="stat-label">Genres</div>
                    </div>
                    <div class="stat">
                        <div class="stat-number" id="avgRating">7.0</div>
                        <div class="stat-label">Avg Rating</div>
                    </div>
                </div>
                <button class="hero-btn" onclick="scrollToMovies()">
                    <i class="fas fa-play"></i>
                    Explore Movies
                </button>
            </div>
            <div class="developer-box">
                <img class="developer-photo" src="/static/images/developer.jpg" alt="Harsh Gupta"
                     onerror="this.src='https://ui-avatars.com/api/?name=Harsh+Gupta&size=400&background=e50914&color=fff&bold=true'">
                <div class="developer-name">HARSH GUPTA</div>
                <div class="developer-label">Developer</div>
            </div>
        </div>
    </section>

    <!-- Genres Section -->
    <section class="section" id="genresSection">
        <div class="section-header">
            <h2 class="section-title"><i class="fas fa-tags"></i> Browse by Genre</h2>
        </div>
        <div class="genres-container" id="genresContainer"></div>
    </section>

    <!-- Top Rated Section -->
    <section class="section" id="topRatedSection">
        <div class="section-header">
            <h2 class="section-title"><i class="fas fa-star"></i> Top Rated Movies</h2>
            <a href="#" class="view-all" onclick="loadMoreMovies('top_rated')">View All <i class="fas fa-arrow-right"></i></a>
        </div>
        <div class="movie-carousel" id="topRatedCarousel"></div>
    </section>

    <!-- Latest Movies Section -->
    <section class="section" id="latestSection">
        <div class="section-header">
            <h2 class="section-title"><i class="fas fa-clock"></i> Latest Releases</h2>
            <a href="#" class="view-all" onclick="loadMoreMovies('latest')">View All <i class="fas fa-arrow-right"></i></a>
        </div>
        <div class="movie-carousel" id="latestCarousel"></div>
    </section>

    <!-- All Movies Section -->
    <section class="section" id="allMoviesSection">
        <div class="section-header">
            <h2 class="section-title"><i class="fas fa-film"></i> <span id="moviesTitle">All Movies</span></h2>
        </div>
        <div class="movies-grid" id="moviesGrid"></div>
    </section>

    <!-- Movie Modal -->
    <div class="modal" id="movieModal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeModal()"><i class="fas fa-times"></i></button>
            <div class="modal-hero">
                <img id="modalBanner" src="" alt="">
                <div class="modal-hero-gradient"></div>
                <div class="modal-poster">
                    <img id="modalPoster" src="" alt="">
                </div>
            </div>
            <div class="modal-body">
                <h1 class="modal-title" id="modalTitle"></h1>
                <div class="modal-meta">
                    <span class="modal-rating" id="modalRating"><i class="fas fa-star"></i> <span></span></span>
                    <div class="modal-meta-item"><i class="fas fa-calendar"></i> <span id="modalYear"></span></div>
                    <div class="modal-meta-item"><i class="fas fa-user"></i> <span id="modalDirector"></span></div>
                </div>
                <div class="modal-genres" id="modalGenres"></div>
                <p class="modal-description" id="modalDescription"></p>
                <div class="modal-cast">
                    <h3><i class="fas fa-users"></i> Cast</h3>
                    <div class="cast-list" id="modalCast"></div>
                </div>
                <div class="recommendations-section">
                    <h3><i class="fas fa-magic"></i> Similar Movies You'll Love</h3>
                    <div class="recommendations-grid" id="recommendationsGrid"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-section">
                <h4>Movie Grid</h4>
                <p style="color: var(--gray);">Your ultimate destination for Bollywood movie recommendations.</p>
            </div>
            <div class="footer-section">
                <h4>Quick Links</h4>
                <ul>
                    <li><a href="#">Home</a></li>
                    <li><a href="#">Top Rated</a></li>
                    <li><a href="#">Latest</a></li>
                    <li><a href="#">Genres</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h4>Genres</h4>
                <ul>
                    <li><a href="#" onclick="filterByGenre('Action')">Action</a></li>
                    <li><a href="#" onclick="filterByGenre('Comedy')">Comedy</a></li>
                    <li><a href="#" onclick="filterByGenre('Drama')">Drama</a></li>
                    <li><a href="#" onclick="filterByGenre('Romance')">Romance</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h4>Features</h4>
                <ul>
                    <li><a href="#">Content-Based Filtering</a></li>
                    <li><a href="#">Genre Recommendations</a></li>
                    <li><a href="#">IMDb Ratings</a></li>
                    <li><a href="#">100+ Movies</a></li>
                </ul>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2024 Movie Grid - Movies Recommendations. All rights reserved.</p>
        </div>
    </footer>

    <script>
        // Global state
        let allMovies = [];
        let currentGenre = 'all';

        // Initialize app
        document.addEventListener('DOMContentLoaded', () => {
            loadStats();
            loadGenres();
            loadTopRated();
            loadLatest();
            loadAllMovies();
            setRandomHeroBg();

            // Navbar scroll effect
            window.addEventListener('scroll', () => {
                const navbar = document.getElementById('navbar');
                if (window.scrollY > 50) {
                    navbar.classList.add('scrolled');
                } else {
                    navbar.classList.remove('scrolled');
                }
            });
        });

        // API Functions
        async function loadStats() {
            try {
                const response = await fetch('/api/stats');
                const stats = await response.json();
                document.getElementById('totalMovies').textContent = stats.total_movies;
                document.getElementById('totalGenres').textContent = stats.genres;
                document.getElementById('avgRating').textContent = stats.avg_rating;
            } catch (error) {
                console.error('Error loading stats:', error);
            }
        }

        async function loadGenres() {
            try {
                const response = await fetch('/api/genres');
                const genres = await response.json();
                const container = document.getElementById('genresContainer');
                
                container.innerHTML = `<div class="genre-tag active" onclick="filterByGenre('all')">All</div>`;
                genres.forEach(genre => {
                    container.innerHTML += `
                        <div class="genre-tag" style="border-color: ${genre.color}" onclick="filterByGenre('${genre.name}')">
                            ${genre.name}
                        </div>
                    `;
                });
            } catch (error) {
                console.error('Error loading genres:', error);
            }
        }

        async function loadTopRated() {
            try {
                const response = await fetch('/api/movies?category=top_rated&limit=15');
                const movies = await response.json();
                const carousel = document.getElementById('topRatedCarousel');
                carousel.innerHTML = movies.map(movie => createMovieCard(movie)).join('');
            } catch (error) {
                console.error('Error loading top rated:', error);
            }
        }

        async function loadLatest() {
            try {
                const response = await fetch('/api/movies?category=latest&limit=15');
                const movies = await response.json();
                const carousel = document.getElementById('latestCarousel');
                carousel.innerHTML = movies.map(movie => createMovieCard(movie)).join('');
            } catch (error) {
                console.error('Error loading latest:', error);
            }
        }

        async function loadAllMovies(genre = 'all') {
            try {
                let url = '/api/movies?limit=100';
                if (genre !== 'all') {
                    url += `&genre=${genre}`;
                }
                const response = await fetch(url);
                const movies = await response.json();
                allMovies = movies;
                
                const grid = document.getElementById('moviesGrid');
                const title = document.getElementById('moviesTitle');
                title.textContent = genre === 'all' ? 'All Movies' : `${genre} Movies`;
                
                grid.innerHTML = movies.map(movie => createMovieCard(movie)).join('');
            } catch (error) {
                console.error('Error loading movies:', error);
            }
        }

        async function loadRecommendations(movieId) {
            try {
                const response = await fetch(`/api/recommendations/${movieId}?limit=6`);
                const recommendations = await response.json();
                const grid = document.getElementById('recommendationsGrid');
                
                grid.innerHTML = recommendations.map(rec => `
                    <div class="rec-card" onclick="openModal(${rec.movie.id})">
                        <img src="${getPosterUrl(rec.movie)}" alt="${rec.movie.title}" 
                             onerror="handleImageError(this, '${rec.movie.title.replace(/'/g, "\\'")}')">
                        <div class="rec-card-info">
                            <div class="rec-card-title">${rec.movie.title}</div>
                            <div class="rec-card-score">
                                <span>⭐ ${rec.movie.imdb}</span>
                                <span class="match">${rec.score}% Match</span>
                            </div>
                        </div>
                    </div>
                `).join('');
            } catch (error) {
                console.error('Error loading recommendations:', error);
            }
        }

        // Search functionality
        async function handleSearch(query) {
            const resultsContainer = document.getElementById('searchResults');
            
            if (query.length < 2) {
                resultsContainer.classList.remove('active');
                return;
            }

            try {
                const response = await fetch(`/api/search?q=${encodeURIComponent(query)}`);
                const results = await response.json();
                
                if (results.length > 0) {
                    resultsContainer.innerHTML = results.slice(0, 8).map(movie => `
                        <div class="search-result-item" onclick="openModal(${movie.id})">
                            <img src="${getPosterUrl(movie)}" alt="${movie.title}" 
                                 onerror="handleImageError(this, '${movie.title.replace(/'/g, "\\'")}')">
                            <div class="search-result-info">
                                <h4>${movie.title}</h4>
                                <span>${movie.year} • ⭐ ${movie.imdb}</span>
                            </div>
                        </div>
                    `).join('');
                    resultsContainer.classList.add('active');
                } else {
                    resultsContainer.innerHTML = '<div class="search-result-item"><span>No results found</span></div>';
                    resultsContainer.classList.add('active');
                }
            } catch (error) {
                console.error('Error searching:', error);
            }
        }

        // Close search results when clicking outside
        document.addEventListener('click', (e) => {
            if (!e.target.closest('.search-container')) {
                document.getElementById('searchResults').classList.remove('active');
            }
        });

        // Get poster URL with fallback
        function getPosterUrl(movie) {
            // Use the movie poster if available (local or remote)
            if (movie.poster) {
                // Local posters start with /static/ or remote posters start with http
                if (movie.poster.startsWith('/static/') || movie.poster.startsWith('http')) {
                    return movie.poster;
                }
            }
            // Fallback to a generated placeholder with movie title
            return `https://via.placeholder.com/200x300/1a1a1a/e50914?text=${encodeURIComponent(movie.title.substring(0, 15))}`;
        }
        
        // Handle image load error
        function handleImageError(img, movieTitle) {
            img.onerror = null; // Prevent infinite loop
            img.src = `https://via.placeholder.com/200x300/1a1a1a/e50914?text=${encodeURIComponent(movieTitle.substring(0, 15))}`;
        }

        // Movie card template
        function createMovieCard(movie) {
            const posterUrl = getPosterUrl(movie);
            return `
                <div class="movie-card" onclick="openModal(${movie.id})">
                    <div class="movie-poster">
                        <img src="${posterUrl}" alt="${movie.title}" loading="lazy" 
                             onerror="handleImageError(this, '${movie.title.replace(/'/g, "\\'")}')">
                        <div class="movie-overlay">
                            <div class="movie-play"><i class="fas fa-play"></i></div>
                        </div>
                        <div class="movie-rating"><i class="fas fa-star"></i> ${movie.imdb}</div>
                    </div>
                    <div class="movie-info">
                        <h3 class="movie-title">${movie.title}</h3>
                        <div class="movie-meta">
                            <span>${movie.year}</span>
                            <span>${movie.director}</span>
                        </div>
                        <div class="movie-genres">
                            ${movie.genres.slice(0, 2).map(g => `<span class="movie-genre-tag">${g}</span>`).join('')}
                        </div>
                    </div>
                </div>
            `;
        }

        // Modal functions
        async function openModal(movieId) {
            try {
                const response = await fetch(`/api/movie/${movieId}`);
                const movie = await response.json();
                
                const posterUrl = getPosterUrl(movie);
                document.getElementById('modalBanner').src = posterUrl;
                document.getElementById('modalBanner').onerror = function() { handleImageError(this, movie.title); };
                document.getElementById('modalPoster').src = posterUrl;
                document.getElementById('modalPoster').onerror = function() { handleImageError(this, movie.title); };
                document.getElementById('modalTitle').textContent = movie.title;
                document.getElementById('modalRating').querySelector('span').textContent = movie.imdb;
                document.getElementById('modalYear').textContent = movie.year;
                document.getElementById('modalDirector').textContent = movie.director;
                document.getElementById('modalDescription').textContent = movie.description;
                
                document.getElementById('modalGenres').innerHTML = movie.genres.map(g => 
                    `<span class="modal-genre">${g}</span>`
                ).join('');
                
                document.getElementById('modalCast').innerHTML = movie.cast.map(c => 
                    `<span class="cast-item">${c}</span>`
                ).join('');
                
                document.getElementById('movieModal').classList.add('active');
                document.body.style.overflow = 'hidden';
                
                // Load recommendations
                loadRecommendations(movieId);
                
            } catch (error) {
                console.error('Error opening modal:', error);
            }
        }

        function closeModal() {
            document.getElementById('movieModal').classList.remove('active');
            document.body.style.overflow = 'auto';
        }

        // Close modal on escape key
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') closeModal();
        });

        // Close modal on background click
        document.getElementById('movieModal').addEventListener('click', (e) => {
            if (e.target.id === 'movieModal') closeModal();
        });

        // Filter functions
        function filterByGenre(genre) {
            currentGenre = genre;
            
            // Update active state
            document.querySelectorAll('.genre-tag').forEach(tag => {
                tag.classList.remove('active');
                if (tag.textContent.trim() === genre || (genre === 'all' && tag.textContent.trim() === 'All')) {
                    tag.classList.add('active');
                }
            });
            
            loadAllMovies(genre);
            
            // Scroll to movies section
            document.getElementById('allMoviesSection').scrollIntoView({ behavior: 'smooth' });
        }

        // Helper functions
        function setRandomHeroBg() {
            const bgImages = [
                'https://m.media-amazon.com/images/M/MV5BODUwNDNjYzctODUxNy00ZTA2LWIyYTEtMDc5Y2E5ZjBmNTMzXkEyXkFqcGc@._V1_.jpg',
                'https://m.media-amazon.com/images/M/MV5BYzk5NjMxNTAtMzRlMS00Mjg4LTg1YTEtYTRmNWRjMTVjMzQyXkEyXkFqcGc@._V1_.jpg',
                'https://m.media-amazon.com/images/M/MV5BOTZjYmUyOGQtMDdjMC00MTVjLTk5YTUtYzI2ZTk3N2ExMDk0XkEyXkFqcGc@._V1_.jpg'
            ];
            const randomBg = bgImages[Math.floor(Math.random() * bgImages.length)];
            document.getElementById('heroBg').style.backgroundImage = `url(${randomBg})`;
        }

        function scrollToMovies() {
            document.getElementById('topRatedSection').scrollIntoView({ behavior: 'smooth' });
        }

        function showSection(section) {
            if (section === 'home') {
                window.scrollTo({ top: 0, behavior: 'smooth' });
            } else if (section === 'genres') {
                document.getElementById('genresSection').scrollIntoView({ behavior: 'smooth' });
            } else if (section === 'top-rated') {
                document.getElementById('topRatedSection').scrollIntoView({ behavior: 'smooth' });
            } else if (section === 'latest') {
                document.getElementById('latestSection').scrollIntoView({ behavior: 'smooth' });
            }
        }

        function loadMoreMovies(category) {
            filterByGenre('all');
        }
    </script>
</body>
</html>
